{% load static %}
{% comment %} Event Content Partial - Used in index.html or event detail pages
{% endcomment %}
<div class="event-content py-8">
  <section
    class="mb-10 card text-center"
  >
    <h1 class="text-4xl font-extrabold mb-2">{{ event.title }}</h1>
    <p
      class="mb-4 text-lg"
    >
      {{ event.hero_section_details }}
    </p>
    {% if event.registration_link %}
    <a
      href="{{ event.registration_link }}"
      id="register-button"
      class="button-primary"
      >Register Now</a
    >
    {% endif %}
  </section>

  <section
    id="countdown-section"
    data-reg-end="{{ event.registration_end|date:'c' }}"
    data-event-start="{{ event.event_start|date:'c' }}"
    data-reveal-time="{{ event.problem_statement_reveal_time|date:'c' }}"
    class="mb-10 flex flex-wrap flex-col gap-8 justify-center items-center w-full"
  >
    <h3 id="countdown-title" class="text-2xl font-bold mb-4">
      Registration Closes In:
    </h3>
    <div id="countdown" class="flex flex-wrap gap-8 w-full justify-center">
      <div
        class="countdown-circle relative w-28 h-28 flex flex-col items-center justify-center"
      >
        <svg class="absolute top-0 left-0 w-full h-full" id="days-ring"></svg>
        <span class="countdown-number text-3xl font-bold" id="days"
          >0</span
        >
        <span
          class="countdown-label text-xs uppercase"
          >Days</span
        >
      </div>
      <div
        class="countdown-circle relative w-28 h-28 flex flex-col items-center justify-center"
      >
        <svg class="absolute top-0 left-0 w-full h-full" id="hours-ring"></svg>
        <span class="countdown-number text-3xl font-bold" id="hours"
          >0</span
        >
        <span
          class="countdown-label text-xs uppercase"
          >Hours</span
        >
      </div>
      <div
        class="countdown-circle relative w-28 h-28 flex flex-col items-center justify-center"
      >
        <svg
          class="absolute top-0 left-0 w-full h-full"
          id="minutes-ring"
        ></svg>
        <span
          class="countdown-number text-3xl font-bold"
          id="minutes"
          >0</span
        >
        <span
          class="countdown-label text-xs uppercase"
          >Minutes</span
        >
      </div>
      <div
        class="countdown-circle relative w-28 h-28 flex flex-col items-center justify-center"
      >
        <svg
          class="absolute top-0 left-0 w-full h-full"
          id="seconds-ring"
        ></svg>
        <span
          class="countdown-number text-3xl font-bold"
          id="seconds"
          >0</span
        >
        <span
          class="countdown-label text-xs uppercase"
          >Seconds</span
        >
      </div>
    </div>
  </section>

  <section class="mb-10 w-full">
    <h2 class="text-2xl font-bold mb-6">Why Participate?</h2>
    <div class="grid md:grid-cols-3 gap-6 w-full">
      {% for benefit in event.benefits.all %}
      <div
        class="card flex flex-col items-center"
      >
        <i data-feather="star" class="w-8 h-8 mb-2"></i>
        <div class="font-semibold text-lg mb-1">
          {{ benefit.title }}
        </div>
        <div>
          {{ benefit.description }}
        </div>
      </div>
      {% empty %}
      <div
        class="col-span-3 text-center"
      >
        No benefits listed yet.
      </div>
      {% endfor %}
    </div>
  </section>

  <section class="mb-10 w-full">
    <h2 class="text-2xl font-bold mb-6">Problem Statements</h2>
    <div class="grid md:grid-cols-2 gap-6 w-full">
      {% for ps in event.problem_statements.all %}
      <div class="card">
        <strong class="text-lg">{{ ps.title }}</strong>
        <div
          class="mt-2"
        >
          {{ ps.description }}
        </div>
      </div>
      {% empty %}
      <div
        class="col-span-2 text-center"
      >
        Problem statements will be released soon.
      </div>
      {% endfor %}
    </div>
  </section>

  <section class="mb-10 w-full">
    <h2 class="text-2xl font-bold mb-6">Schedule</h2>
    <div class="timeline w-full">
      {% for schedule in event.schedules.all %}
      <div class="timeline-day mb-6">
        <div class="font-bold mb-2">{{ schedule.day_title }}</div>
        <ul class="ml-4 border-l-2 pl-4">
          {% for sub in schedule.sub_schedules.all %}
          <li class="mb-2">
            <span class="font-semibold">{{ sub.time }}</span> -
            <span
              class=""
              >{{ sub.activity }}</span
            >
          </li>
          {% endfor %}
        </ul>
      </div>
      {% empty %}
      <div
        class="text-center"
      >
        Schedule will be announced soon.
      </div>
      {% endfor %}
    </div>
  </section>

  <section class="mb-10 w-full">
    <h2 class="text-2xl font-bold mb-6">How to Participate</h2>
    <ol
      class="list-decimal ml-6"
    >
      {% for step in event.participation_steps.all %}
      <li>{{ step.description }}</li>
      {% empty %}
      <li>Steps will be announced soon.</li>
      {% endfor %}
    </ol>
  </section>

  <section class="mb-10 w-full">
    <h2 class="text-2xl font-bold mb-6">Organizers</h2>
    <div class="grid md:grid-cols-2 gap-6 w-full">
      {% for organizer in event.organizers.all %}
      <div class="card">
        <div class="font-semibold">{{ organizer.name }}</div>
        <div class="">
          {{ organizer.role }}
        </div>
      </div>
      {% empty %}
      <div
        class="col-span-2 text-center"
      >
        Organizers will be announced soon.
      </div>
      {% endfor %}
    </div>
  </section>

  <section class="mb-10 w-full">
    <h2 class="text-2xl font-bold mb-6">FAQs</h2>
    <div class="accordion w-full">
      {% for faq in event.faqs.all %}
      <div
        class="accordion-item card mb-4"
      >
        <button
          class="accordion-question w-full text-left px-6 py-4 font-semibold focus:outline-none"
        >
          {{ faq.question }}
        </button>
        <div
          class="accordion-answer px-6 pb-4 hidden"
        >
          {{ faq.answer }}
        </div>
      </div>
      {% empty %}
      <div
        class="text-center"
      >
        No FAQs available yet.
      </div>
      {% endfor %}
    </div>
  </section>

  <footer
    class="mt-12 pt-8 border-t grid md:grid-cols-3 gap-8 w-full"
  >
    <div>
      <h3 class="font-bold mb-2">Organized By</h3>
      {% for organizer in event.organizers.all %}
      <div>{{ organizer.name }}</div>
      {% endfor %}
    </div>
    <div>
      <h3 class="font-bold mb-2">Venue</h3>
      <div>{{ event.venue_name }}</div>
      <div>{{ event.venue_location }}</div>
    </div>
    <div>
      <h3 class="font-bold mb-2">Connect with Us</h3>
      <div>
        Instagram:
        <a
          href="{{ event.instagram_link }}"
          class="underline"
          target="_blank"
          >{{ event.instagram_link }}</a
        >
      </div>
      <div>
        Email:
        <a href="mailto:{{ event.contact_email }}" class="underline"
          >{{ event.contact_email }}</a
        >
      </div>
    </div>
  </footer>
</div>

{% block scripts %}
<script src="{% static 'js/event_page.js' %}"></script>
{% endblock %}
